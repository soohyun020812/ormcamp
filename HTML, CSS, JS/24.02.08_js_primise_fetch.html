<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <script>
            // 커피를 주문하는 프로미스 객체를 생성
            // 생성자에는 약속을 지키기 위한 resolve와, 약속을 지키지 못했을 때를 대비한 reject 두 가지를 인자로 전달
            // 프로미스 객체를 생성하는 순간 프로미스 생성자함수의 콜백 함수가 실행됩니다. 이를 실행자(executor)라 부름
            const orderCoffee = fetch('orderCoffee.txt')
                .then((response) => {
                    // response.ok 는 응답이 성공적(200-299)일 경우 true, 아니면 false를 반환
                    if (!response.ok) {
                        throw new Error(
                            `커피주문이 정상적으로 이뤄지지 않았습니다. ${response.status}`
                        );
                    }
                    return response.text();
                })
                .then((asyncResult) => {
                    console.log(asyncResult);
                    console.log('약속이 이루어졌습니다.');
                    return asyncResult;
                })
                .catch((error) => {
                    // then 메소드는 프라미스 객체를 반환하기 때문에 catch 메소드를 이어서 쓰는것이 가능
                    // resolve 메소드와 마찬가지로 reject 메소드가 실행될때 전달된 인자는 catch 메소드의 콜백함수의 인자로 전달
                    console.log(error);
                });
        </script>
    </body>
</html>